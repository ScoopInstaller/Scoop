version: 2.4.37
description: Apache web server.
homepage: https://www.apachelounge.com
license: Apache-2.0
architecture:
  64bit:
    url: https://fossies.org/windows/www/httpd-2.4.37-win64-VC15.zip
    hash: 33afeb018e0cee8592d44abbf72fda37f6a35586aeb5f4b4c1b717c681d82dd8
  32bit:
    url: https://fossies.org/windows/www/httpd-2.4.37-win32-VC15.zip
    hash: aecae187d55813a1bfa73337b386e9bc457de40b7d0796dbfd76b94a8d9892e6
extract_dir: Apache24
persist:
- htdocs
- conf
bin:
- bin\ab.exe
- bin\abs.exe
- bin\htcacheclean.exe
- bin\htdbm.exe
- bin\htdigest.exe
- bin\htpasswd.exe
- bin\httpd.exe
- bin\httxt2dbm.exe
- bin\logresolve.exe
- bin\rotatelogs.exe
env_add_path:
  - '.'
  - 'conf'
env_set:
  'SOMEENVVAL': 'THIS IS SET'
post_install: >
  # set directory in httpd.conf

  $conf = "$dir\conf\httpd.conf"

  $root = (scoop which httpd | Split-Path -Resolve -Parent | Split-Path -Parent) -replace '\\', '/'

  (Get-Content $conf) -replace 'c:/Apache\d+', "$root" | Set-Content $conf
checkver:
  url: https://www.apachelounge.com/download/
  regex: Apache ([\d\.]+) Win64
autoupdate:
  architecture:
    64bit:
      url: https://fossies.org/windows/www/httpd-$version-win64-VC15.zip
    32bit:
      url: https://fossies.org/windows/www/httpd-$version-win32-VC15.zip
  hash:
    url: $url_fossies.sha256
  extract_dir: Apache$majorVersion$minorVersion
